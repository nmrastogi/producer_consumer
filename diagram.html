<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producer-Consumer Patterns Comparison</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        .diagram-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        .comparison-table tr:hover {
            background: #f8f9fa;
        }
        .check {
            color: #28a745;
            font-weight: bold;
        }
        .cross {
            color: #dc3545;
            font-weight: bold;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .stat-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Producer-Consumer Patterns in Go</h1>
        <p class="subtitle">Comparing In-Memory Channels vs Apache Kafka</p>
        
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    subgraph "In-Memory Channels (Simple)"
        direction LR
        P1[Producer 1<br/>Produces: 100-109] -->|jobs <- job| CH[Buffered Channel<br/>Capacity: 100<br/>Type: chan int]
        P2[Producer 2<br/>Produces: 200-209] -->|jobs <- job| CH
        CH -->|job := <-jobs| C1[Consumer 1]
        CH -->|job := <-jobs| C2[Consumer 2]
        
        style CH fill:#4CAF50,stroke:#2E7D32,stroke-width:3px,color:#fff
        style P1 fill:#2196F3,stroke:#1565C0,color:#fff
        style P2 fill:#2196F3,stroke:#1565C0,color:#fff
        style C1 fill:#FF9800,stroke:#E65100,color:#fff
        style C2 fill:#FF9800,stroke:#E65100,color:#fff
    end
    
    subgraph "Apache Kafka (Distributed)"
        direction LR
        KP1[Producer 1<br/>Produces: job-100 to job-109<br/>Keys: p1-m0 to p1-m9] -->|Hash Balancer| KB[Kafka Broker<br/>Topic: jobs<br/>Partitions: 0, 1, 2]
        KP2[Producer 2<br/>Produces: job-200 to job-209<br/>Keys: p2-m0 to p2-m9] -->|Hash Balancer| KB
        
        KB -->|Partition 0 & 1| KC1[Consumer 1<br/>Group: worker-group]
        KB -->|Partition 2| KC2[Consumer 2<br/>Group: worker-group]
        
        style KB fill:#9C27B0,stroke:#6A1B9A,stroke-width:3px,color:#fff
        style KP1 fill:#2196F3,stroke:#1565C0,color:#fff
        style KP2 fill:#2196F3,stroke:#1565C0,color:#fff
        style KC1 fill:#FF9800,stroke:#E65100,color:#fff
        style KC2 fill:#FF9800,stroke:#E65100,color:#fff
    end
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h3>In-Memory Channels</h3>
                <div class="number">43</div>
                <p>Lines of Code</p>
            </div>
            <div class="stat-card">
                <h3>Kafka Implementation</h3>
                <div class="number">~250</div>
                <p>Lines of Code</p>
            </div>
            <div class="stat-card">
                <h3>Memory Footprint</h3>
                <div class="number">800B</div>
                <p>vs ~23KB</p>
            </div>
            <div class="stat-card">
                <h3>Setup Time</h3>
                <div class="number">0s</div>
                <p>vs ~30s</p>
            </div>
        </div>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>In-Memory Channels</th>
                    <th>Apache Kafka</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Setup Complexity</strong></td>
                    <td><span class="check">‚úÖ Simple (no setup)</span></td>
                    <td><span class="cross">‚ö†Ô∏è Requires Kafka</span></td>
                </tr>
                <tr>
                    <td><strong>Performance</strong></td>
                    <td><span class="check">‚úÖ Very Fast (in-memory)</span></td>
                    <td><span class="check">‚úÖ Fast (network overhead)</span></td>
                </tr>
                <tr>
                    <td><strong>Persistence</strong></td>
                    <td><span class="cross">‚ùå None</span></td>
                    <td><span class="check">‚úÖ Disk persistence</span></td>
                </tr>
                <tr>
                    <td><strong>Scalability</strong></td>
                    <td><span class="cross">‚ùå Single process</span></td>
                    <td><span class="check">‚úÖ Horizontal scaling</span></td>
                </tr>
                <tr>
                    <td><strong>Distribution</strong></td>
                    <td><span class="cross">‚ùå Single machine</span></td>
                    <td><span class="check">‚úÖ Multi-machine</span></td>
                </tr>
                <tr>
                    <td><strong>Fault Tolerance</strong></td>
                    <td><span class="cross">‚ùå Process crash = data loss</span></td>
                    <td><span class="check">‚úÖ Survives crashes</span></td>
                </tr>
                <tr>
                    <td><strong>Load Balancing</strong></td>
                    <td><span class="cross">‚ùå Manual</span></td>
                    <td><span class="check">‚úÖ Automatic (consumer groups)</span></td>
                </tr>
                <tr>
                    <td><strong>Replay Capability</strong></td>
                    <td><span class="cross">‚ùå No</span></td>
                    <td><span class="check">‚úÖ Yes (offset management)</span></td>
                </tr>
            </tbody>
        </table>

        <div class="footer">
            <p><strong>Key Takeaway:</strong> Choose the right tool for the job. Simple channels for in-process communication, Kafka for distributed systems.</p>
            <p>Built with Go ‚Ä¢ Apache Kafka ‚Ä¢ Distributed Systems</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>

